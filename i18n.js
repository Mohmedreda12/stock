// i18n.js — ملف ترجمة كامل للموقع وصفحة الموديلات

const I18N = {
  ar: {
    /* ===== الشريط العلوي والصفحات ===== */
    home: "الرئيسية",
    brand: "إدارة المخزن",
    in: "إدخال",
    out: " إخراج",
    stock: "المخزن",
    logs: "السجل",
    models: "الموديلات",

    /* زر اللغة + تسمية زر الهمبرجر */
    lang_toggle: "ع/En",
    menu_label: "القائمة",

    /* أزرار الصفحة الرئيسية */
    home_btn: "الرئيسية",
    in_btn: "إدخال",
    out_btn: "إخراج",
    stock_btn: "المخزون",
    logs_btn: "السجل",
    models_btn: "الموديلات",

    /* الحقول العامة */
    code: "العنصر الرئيسي (كود/اسم)",
    qty: "الكمية",
    sizeType: "نوع المقاس",
    sizeNum: "المقاس (أرقام)",
    sizeAlpha: "المقاس (حروف)",
    do: "تنفيذ العملية",
    clear: "تفريغ الحقول",
    search: "بحث بالعنصر/الكود…",
    category: "الصنف",
    fabric: "القماش",
    size: "المقاس",
    all: "الكل",

    /* السجل */
    logTitle: "سجل العمليات",
    clearLogs: "مسح السجل",
    table_time: "الوقت",
    table_action: "العملية",
    table_item: "العنصر",

    /* نماذج الإدخال والإخراج */
    form_in:"إدخال",
    form_out: "إخراج",
    badge_in: "IN",
    badge_out: "OUT",

    /* أخطاء ونصوص عامة */
    err_code: "اكتب العنصر الرئيسي.",
    err_qty: "اكتب كمية صحيحة (> 0).",
    err_size: "اختر المقاس.",
    err_cat: "اختر الصنف.",
    err_fab: "اختر القماش.",
    done: "تمت العملية بنجاح.",
    empty: "لا توجد بيانات مطابقة.",
    no_logs: "لا يوجد سجل.",

    /* القيم الجاهزة */
    cat_vals: ["قميص", "بنطلون", "كفروال", "جاكيت", "Lapcod"],
    fab_vals: ["نومكس", "عادي", "قطن", "Arc فلاش", "استرتش", "ليزنج", "arc لينزنج", "قطن fr"],
    sizes_alpha: ["XS", "S", "M", "L", "XL", "2XL", "3XL", "4XL", "5XL", "6XL", "7XL"],

    /* ===== صفحة الموديلات ===== */
    models_title: "عرض الموديلات",
    models_add: "إضافة موديل",
    models_search: "ابحث بالعنوان…",
    models_empty: "لا توجد موديلات بعد. اضغط “إضافة موديل”.",
    models_add_edit: "إضافة / تعديل موديل",
    models_image: "الصورة",
    models_pick: "اسحب الصورة هنا أو اضغط للاختيار",
    models_caption: "التعليق (اختياري)",

    edit: "تعديل",
    del: "حذف",
    cancel: "إلغاء",
    save: "حفظ",

    needImg: "اختر صورة أولًا",
    deleted: "تم الحذف",

// ===== صفحة الدخول =====
login_title: "تسجيل الدخول",
login_user: "المعرف",
login_pass: "كلمة السر",
login_btn: "دخول",
login_err: "المعرف أو كلمة السر غير صحيحة.",

// AR
logout: "تسجيل الخروج",

  },

  en: {
    /* ===== Topbar & Pages ===== */
    home: "Home",
    brand: "Inventory Manager",
    in: "Inbound",
    out: "Outbound",
    stock: "Stock",
    logs: "Logs",
    models: "Models",

    /* Lang button + hamburger label */
    lang_toggle: "AR/EN",
    menu_label: "Menu",

    /* Home buttons */
    home_btn: "Home",
    in_btn: "Inbound",
    out_btn: "Outbound",
    stock_btn: "Stock",
    logs_btn: "Logs",
    models_btn: "Models",

    /* Common Fields */
    code: "Main Item (Code/Name)",
    qty: "Quantity",
    sizeType: "Size Type",
    sizeNum: "Size (Numbers)",
    sizeAlpha: "Size (Alpha)",
    do: "Submit",
    clear: "Clear",
    search: "Search by item/code…",
    category: "Category",
    fabric: "Fabric",
    size: "Size",
    all: "All",

    /* Logs */
    logTitle: "Operations Log",
    clearLogs: "Clear Logs",
    table_time: "Time",
    table_action: "Action",
    table_item: "Item",

    /* Forms */
    form_in: "Inbound",
    form_out: "Outbound",
    badge_in: "IN",
    badge_out: "OUT",

    /* Errors & Common */
    err_code: "Enter main item.",
    err_qty: "Enter a valid quantity (> 0).",
    err_size: "Choose size.",
    err_cat: "Choose category.",
    err_fab: "Choose fabric.",
    done: "Done successfully.",
    empty: "No matching data.",
    no_logs: "No logs.",

    /* Values */
    cat_vals: ["Shirt", "Pants", "Coverall", "Jacket", "Lapcod"],
    fab_vals: ["Nomex", "Regular", "Cotton", "Arc Flash", "Stretch", "Lenzing", "arc Lenzing", "Cotton FR"],
    sizes_alpha: ["XS", "S", "M", "L", "XL", "2XL", "3XL", "4XL", "5XL", "6XL", "7XL"],

    /* ===== Models Page ===== */
    models_title: "Models",
    models_add: "Add Model",
    models_search: "Search by title…",
    models_empty: "No models yet. Click “Add Model”.",
    models_add_edit: "Add / Edit Model",
    models_image: "Image",
    models_pick: "Drop image here or click to choose",
    models_caption: "Caption (optional)",

    edit: "Edit",
    del: "Delete",
    cancel: "Cancel",
    save: "Save",

    needImg: "Pick an image first",
    deleted: "Deleted",


    // EN
login_title: "Sign in",
login_user: "User ID",
login_pass: "Password",
login_btn: "Sign in",
login_err: "Invalid username or password.",

// EN
logout: "Sign out",



  }
};

/* ===== دوال التحكم بالترجمة ===== */
function getLang() {
  return localStorage.getItem('lang') || (navigator.language?.startsWith('ar') ? 'ar' : 'en');
}

function setLang(lang) {
  const l = (lang === 'en') ? 'en' : 'ar';
  localStorage.setItem('lang', l);
  document.documentElement.lang = l;
  document.documentElement.dir  = (l === 'ar') ? 'rtl' : 'ltr';
  applyTranslations(document);
  document.dispatchEvent(new CustomEvent('lang:changed', { detail: l }));
}

function applyTranslations(root = document) {
  const dict = I18N[getLang()] || I18N.ar;

  // ترجمة النصوص
  root.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (dict[key] != null) el.textContent = dict[key];
  });

  // ترجمة الخصائص مثل placeholder/title/aria-label
  root.querySelectorAll('[data-i18n-attr]').forEach(el => {
    const pairs = el.dataset.i18nAttr.split(';');
    pairs.forEach(p => {
      const [attr, key] = p.split(':').map(s => s && s.trim());
      if (!attr || !key) return;
      if (dict[key] != null) el.setAttribute(attr, dict[key]);
    });
  });
}

/* توافق مع الاسم القديم */
const applyStaticTexts = applyTranslations;

/* تهيئة عند التحميل */
document.addEventListener('DOMContentLoaded', () => {
  setLang(getLang());
  applyTranslations(document);
});

/* إتاحة الدوال عالمياً */
window.I18N = I18N;
window.getLang = getLang;
window.setLang = setLang;
window.applyTranslations = applyTranslations;
window.applyStaticTexts = applyStaticTexts;



