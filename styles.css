/* =====================================================
   THEME TOKENS — دارك أنيق عالي التباين
===================================================== */
:root{
  /* الألوان الأساسية */
  --bg:#0b1220;        /* خلفية عامة */
  --surface:#0e1729;   /* أسطح */
  --card:#111a2b;      /* بطاقات/صناديق */
  --text:#e6edf3;      /* نص أساسي */
  --muted:#93a4b8;     /* نص ثانوي */
  --border:#223049;    /* حدود */

  /* ألوان الحركة */
  --primary:#5b6cff;   /* بنفسجي-أزرق */
  --primary-2:#22d3ee; /* سماوي */
  --danger:#ef4444;

  /* مظلات وحواف */
  --shadow-sm:0 2px 10px rgba(0,0,0,.45);
  --shadow-md:0 10px 30px rgba(0,0,0,.55);
  --radius-lg:16px;
  --radius-md:12px;

  color-scheme: dark;  /* نجبر الدارك لأعلى وضوح */
}

/* =====================================================
   BASE
===================================================== */
*{ box-sizing:border-box; }
html{ scroll-behavior:smooth; }
body{
  margin:0; background:var(--bg); color:var(--text);
  font: 16px/1.6 system-ui,-apple-system,"Segoe UI",Roboto,"Noto Naskh Arabic UI",Arial,sans-serif;
}
.app-body{ padding-top:72px; }          /* مساحة للشريط الثابت */
.container{ max-width:1100px; margin-inline:auto; padding:16px; }

.visually-hidden{
  position:absolute!important; width:1px; height:1px; margin:-1px; padding:0;
  overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
}
.rtl{direction:rtl;} .ltr{direction:ltr;}

/* =====================================================
   TOPBAR ثابت + زر همبرجر بعنوان فوقه
===================================================== */
.topbar{
  position:fixed; inset:0 0 auto 0; height:72px;
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 16px;
  background: linear-gradient(180deg, #0d1526 0%, #0b1220 100%);
  border-bottom:1px solid var(--border);
  box-shadow: var(--shadow-sm);
  z-index:1000;
}

/* الاسم */
.brand{
  display:flex; align-items:center; gap:8px;
  font-weight:800; font-size:18px; letter-spacing:.2px; cursor:pointer;
}
.brand .brand-en{ display:none; opacity:.9; font-weight:700; }
html[lang="en"] .brand .brand-ar{ display:none; }
html[lang="en"] .brand .brand-en{ display:inline; }

/* يمين الشريط */
.top-actions{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.chip{
  background: var(--surface); color: var(--text);
  border:1px solid var(--border);
  padding:8px 12px; border-radius:999px; font-weight:700; cursor:pointer;
  transition: background .2s, transform .1s;
}
.chip:hover{ background:#15213a; transform: translateY(-1px); }

.hamburger{
  position:relative;
  width:44px; height:44px; display:grid; place-items:center;
  background: var(--surface); color: var(--text);
  border:1px solid var(--border); border-radius:10px; cursor:pointer;
  transition: background .2s;
}
.hamburger:hover{ background:#15213a; }
.hamburger span{
  display:block; width:22px; height:2px; background: currentColor;
  margin:3px 0; border-radius:2px;
}
/* عنوان صغير فوق زر الهمبرجر (يُقرأ من aria-label) */
.hamburger::before{
  content: attr(aria-label);
  position:absolute; inset-block-start:-18px; inset-inline:0;
  text-align:center; color:var(--muted); font-size:11px; line-height:1;
}

/* =====================================================
   QUICK MENU (القائمة المنسدلة)
===================================================== */
.quick-menu{
  position: fixed;
  inset-inline-end: 12px;
  inset-block-start: 82px;
  background: #0f1a30;
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  padding: 8px;
  width: clamp(230px, 28vw, 320px);
  z-index: 1200;
}
.quick-menu a, .quick-menu button{
  display:block; width:100%; text-align:start;
  padding:12px 14px; margin:2px 0;
  border-radius:10px; border:none; background:transparent;
  color: var(--text); text-decoration:none; font-weight:700; cursor:pointer;
  transition: background .18s, transform .05s;
}
.quick-menu a:hover{ background: rgba(255,255,255,.06); }
.quick-menu a.active{
  background: color-mix(in srgb, var(--primary), transparent 70%);
  outline: 2px solid color-mix(in srgb, var(--primary), transparent 60%);
}
.quick-menu .menu-disabled{ opacity:.55; cursor:not-allowed; }
[hidden]{ display:none !important; }

/* =====================================================
   HOME — أزرار تحت بعض دائمًا وبنفس الشكل
===================================================== */
.container.home{ max-width:720px; }
.home .btn-grid{
  display:grid; grid-template-columns:1fr; gap:14px;   /* عمود واحد على كل المقاسات */
}

.tile{
  display:grid; place-items:center;
  width:100%; min-height:96px; padding:16px;
  background: linear-gradient(180deg, var(--card), var(--surface));
  color: var(--text);
  border:1px solid var(--border); border-radius: var(--radius-lg);
  text-decoration:none; font-weight:900; font-size:1.05rem; letter-spacing:.2px;
  box-shadow: var(--shadow-sm);
  transition: transform .16s ease, box-shadow .2s ease, border-color .2s;
}
.tile:hover{ transform: translateY(-3px); box-shadow: var(--shadow-md); border-color: rgba(255,255,255,.18); }

.tile.disabled{
  opacity:.65; pointer-events:none;
  background: linear-gradient(180deg, #121a2b, #101826);
  border-style:dashed;
}

/* =====================================================
   BUTTONS
===================================================== */
.btn{
  display:inline-grid; place-items:center;
  padding:10px 14px; border-radius: var(--radius-md);
  border:1px solid var(--border);
  background: var(--surface); color: var(--text);
  font-weight:800; cursor:pointer; text-decoration:none;
  transition: transform .1s, box-shadow .2s, background .2s;
}
.btn:hover{ transform: translateY(-1px); box-shadow:var(--shadow-sm); }
.btn-primary{ background: var(--primary); color:#0b1220; border-color: transparent; }
.btn-secondary{ background: var(--primary-2); color:#0b1220; border-color: transparent; }
.btn-danger{ background: var(--danger); color:#fff; border-color: transparent; }

/* =====================================================
   CARDS
===================================================== */
.card{
  background: #0f1a30;
  border:1px solid var(--border);
  border-radius: var(--radius-lg);
  padding:16px; box-shadow: var(--shadow-sm);
}

/* =====================================================
   FORMS
===================================================== */
.grid{ display:grid; gap:12px; }
.form-2{ grid-template-columns:1fr 1fr; }
@media (max-width: 720px){ .form-2{ grid-template-columns:1fr; } }

.label{ font-size:.9rem; color:var(--muted); margin-bottom:6px; }
.input, select, textarea{
  width:100%; padding:11px 12px;
  background:#0c1626; color:#e9f1fb;
  border:1px solid #2a3b57; border-radius:12px; outline:0;
  transition:border-color .2s, box-shadow .2s;
}
.input::placeholder{ color: color-mix(in srgb, var(--muted), transparent 30%); }
.input:focus, select:focus, textarea:focus{
  border-color: var(--primary);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary), transparent 75%);
}
input[type="radio"], input[type="checkbox"]{ accent-color: var(--primary-2); }

/* فلاتر كبسولات */
.filter-row{ display:flex; gap:8px; flex-wrap:wrap; }
.fbtn{
  background:#0c1626; color:var(--text);
  border:1px solid #2a3b57; padding:7px 12px;
  border-radius:999px; cursor:pointer; font-size:.9rem;
}
.fbtn:hover{ border-color: var(--primary); }
.fbtn.active{
  outline:2px solid color-mix(in srgb, var(--primary), transparent 65%);
  border-color: var(--primary);
}

/* أكورديون */
.acc{ background:#0f1a30; border:1px solid var(--border); border-radius:12px; overflow:hidden; }
.acc > summary{
  list-style:none; cursor:pointer; padding:12px 14px;
  display:flex; align-items:center; justify-content:space-between;
  font-weight:700; color:var(--text);
}
.acc > summary::-webkit-details-marker{ display:none; }
.acc > summary:after{ content:"▾"; opacity:.6; transition:transform .2s ease; }
.acc[open] > summary:after{ transform:rotate(180deg); }
.acc .acc-body{
  padding:10px 12px; height:220px; overflow-y:auto;
  display:flex; flex-wrap:wrap; gap:8px; border-top:1px solid var(--border);
}
@media (max-width: 859px){ .acc .acc-body{ height:180px; } }
.acc .acc-body::-webkit-scrollbar{ width:8px; }
.acc .acc-body::-webkit-scrollbar-thumb{ background:#24344f; }
.acc .acc-body:hover::-webkit-scrollbar-thumb{ background:#2f4670; }

/* شارات IN/OUT */
.badge{ padding:2px 8px; border-radius:8px; font-size:.75rem; font-weight:800; border:1px solid var(--border); }
.in{ color:#10b981; background: rgba(16,185,129,.15); border-color: rgba(16,185,129,.35); }
.out{ color:#f87171; background: rgba(248,113,113,.15); border-color: rgba(248,113,113,.35); }

/* =====================================================
   TABLES — للسجل/المخزون
===================================================== */
.table-wrap{ width:100%; overflow:auto; border-radius:var(--radius-lg); box-shadow: var(--shadow-sm); }
.table{
  width:100%; border-collapse:collapse; font-size:.92rem;
  background:#0f1a30; color:var(--text);
  border:1px solid var(--border);
}
.table th, .table td{ padding:10px 8px; border-bottom:1px solid var(--border); text-align:start; }
.table thead th{
  background:#0d1628; color: var(--muted); font-weight:900;
}
.table tr:hover td{ background: rgba(255,255,255,.04); }
@media (max-width:600px){
  .table th, .table td{ padding:8px 6px; font-size:.9rem; }
  .btn{ padding:9px 12px; }
  .tile{ min-height:92px; }
}

/* =====================================================
   HELPERS
===================================================== */
.mt-2{ margin-top:8px; } .mt-3{ margin-top:12px; } .mt-4{ margin-top:16px; }
.mb-2{ margin-bottom:8px; } .mb-3{ margin-bottom:12px; } .mb-4{ margin-bottom:16px; }

/* هالة تركيز موحّدة ناعمة لكل العناصر */
*{ outline-color: color-mix(in srgb, var(--primary), transparent 70%); }





/* ===== رسائل النظام (Toast Messages) ===== */
#toastHost {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 9999;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  pointer-events: none; /* يمنع التداخل مع باقي الصفحة */
}

.toast {
  min-width: 260px;
  max-width: 320px;
  background: #1e293b; /* لون أساسي غامق */
  color: white;
  border-radius: 10px;
  padding: 16px 20px;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 12px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  opacity: 0;
  transform: translateY(-20px) scale(0.95);
  transition: all 0.35s ease;
  pointer-events: auto;
  direction: rtl; /* افتراضي للعربي */
}

.toast.show {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* أيقونة الرسالة */
.toast-icon {
  font-size: 20px;
  flex-shrink: 0;
}

/* نص الرسالة */
.toast-msg {
  flex: 1;
  line-height: 1.4;
  word-break: break-word;
}

/* أنواع الرسائل */
.toast.success {
  border-left: 6px solid #16a34a; /* أخضر */
}

.toast.error {
  border-left: 6px solid #dc2626; /* أحمر */
}

.toast.info {
  border-left: 6px solid #2563eb; /* أزرق */
}

/* عند الضغط على الرسالة */
.toast:active {
  transform: scale(0.97);
  opacity: 0.9;
}

/* ===== Toolbar (search + add) ===== */
.toolbar{
  display:flex; align-items:center; gap:12px; margin:16px 0;
}
.toolbar .search{ flex:1; min-width:220px; }   /* يوسع خانة البحث */
.btn.btn-primary{ background:var(--primary); color:#0b1220; border-color:transparent; }

/* اترك مسافة للشريط العلوي الثابت */
.app-body{ padding-top:72px; }

/* ===== بطاقات الموديلات ===== */
.grid{ display:grid; gap:16px; grid-template-columns:repeat(2,minmax(0,1fr)); }
@media (min-width:700px){ .grid{ grid-template-columns:repeat(3,minmax(0,1fr)); } }
@media (min-width:1024px){ .grid{ grid-template-columns:repeat(4,minmax(0,1fr)); } }

.card{
  background:var(--card); border:1px solid var(--border);
  border-radius:16px; overflow:hidden; box-shadow:var(--shadow-sm);
  transition:transform .16s, box-shadow .2s; cursor:pointer;
}
.card:hover{ transform:translateY(-2px); box-shadow:var(--shadow-md); }
.card .media{ aspect-ratio:3/4; width:100%; background:#0c1626; display:grid; place-items:center; overflow:hidden; }
.card .media img{ width:100%; height:100%; object-fit:cover; }
.caption{ padding:8px 10px; font-weight:700; text-align:center; }

/* ===== Dialog (إضافة/تعديل) ===== */
dialog{
  padding:0; border:none; width:min(92vw,520px); max-width:520px;
  background:var(--surface); color:var(--text);
  border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow-md);
}
dialog::backdrop{ background:rgba(0,0,0,.45); }
.dlg-body{ padding:16px 16px 0; }
.dlg-actions{
  display:flex; gap:8px; justify-content:flex-end;
  padding:12px 16px; border-top:1px solid var(--border);
  background: linear-gradient(180deg,#0f1a30,#0e1729);
  border-radius:0 0 16px 16px;
  position:sticky; bottom:0;   /* يخلي زر الحفظ ظاهر دايمًا */
}

/* إسقاط/معاينة الصورة */
.file-drop{ border:2px dashed var(--border); border-radius:14px; padding:14px; text-align:center; background:#0c1626; color:var(--muted); }
.file-drop.drag{ border-color:var(--primary); background:#0e1b30; }
.preview{ margin-top:10px; border-radius:12px; overflow:hidden; border:1px solid var(--border); }
.preview img{ display:block; width:100%; height:auto; max-height:220px; object-fit:contain; }

/* ===== منيو الضغط المطول ===== */
.context{
  position:fixed; inset:0; display:none; place-items:center;
  background:rgba(0,0,0,.45); z-index:4000;   /* ← كانت هي السبب */
}
.context .box{
  background:var(--surface); border:1px solid var(--border);
  border-radius:16px; padding:8px; min-width:240px; box-shadow:var(--shadow-md);
}
.context .box button{
  display:block; width:100%; text-align:start; padding:10px 12px;
  border-radius:10px; border:1px solid transparent; background:transparent;
  color:var(--text); font-weight:700; cursor:pointer;
}
.context .box button:hover{ background:rgba(255,255,255,.06); }
.context .box .danger{ color:#ef4444; }
 





/* نزّل عنوان النموذج لتحت شوية في in.html و out.html */
#formTitle{
  margin-top: 24px;          /* زوّد/قلّل الرقم على مزاجك */
  display: inline-block;
}

/* خلّي شارة IN/OUT نقطة ملوّنة بدون نص */
#modeBadge.badge{
  width: 12px;
  height: 12px;
  padding: 0;
  border-radius: 999px;
  border: none;
  display: inline-block;
  line-height: 0;
  font-size: 0;              /* يخفي كلمة IN/OUT */
  vertical-align: middle;
  margin-inline-start: 8px;  /* مسافة بسيطة عن العنوان */
}

/* الألوان موجودة أصلاً في .in و .out وهنستفيد منها */


/* تحريك عنوان النموذج والشارة لتحت */
#formTitle {
  margin-top: 40px; /* زوّد أو قلّل الرقم حسب اللي يناسبك */
  display: inline-block;
}

/* ضبط مكان الشارة بالنسبة للعنوان */
#modeBadge.badge {
  margin-top: 40px; /* نفس المسافة عشان ينزل مع العنوان */
  width: 12px;
  height: 12px;
  padding: 0;
  border-radius: 50%;
  border: none;
  display: inline-block;
  font-size: 0; /* يخفي النص */
  vertical-align: middle;
  margin-inline-start: 10px;
}


/* مسافة إضافية لصفحة السجل */
body[data-page="logs"] .container {
  margin-top: 30px; /* يمكنك زيادة أو تقليل الرقم حسب رغبتك */
}